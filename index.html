<!DOCTYPE html>
<!-- この行はHTML5のドキュメントタイプを示します -->

<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- 文字エンコーディングをUTF-8に設定 -->

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- ビューポートの設定 -->

    <title>案件一覧｜ポイまる</title>
    <!-- ページのタイトル -->

    <script type="text/javascript" src="./案件一覧｜ポイまる_files/jquery.js.ダウンロード"></script>
    <!-- jQueryライブラリの読み込み -->

    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js"></script>
    <!-- Firebase JavaScript SDKの読み込み -->

    <link href="./案件一覧｜ポイまる_files/css2" rel="stylesheet">
    <link rel="stylesheet" href="./案件一覧｜ポイまる_files/all.min.css">
    <link href="./案件一覧｜ポイまる_files/style.css" rel="stylesheet" type="text/css">
    <!-- CSSファイルの読み込み -->

</head>

<body>
    <header class="l-header">
        <!-- ヘッダー -->
        <!-- ナビゲーションメニュー -->
    </header>
    <!-- l-header -->

    <section class="l-container">
        <!-- コンテンツコンテナ -->

        <div class="main">
            <!-- メインコンテンツ -->

            <div class="list newList">
                <!-- 案件一覧 -->
				<br>
                <h2>案件一覧</h2>
                <!-- 案件一覧のタイトル -->

                <ul class="list__block" id="projectList">      
                </ul>

            </div>
            <!-- list --> 

        </div>
        <!-- main -->

    </section>
    <!-- l-container -->

    <footer class="l-footer">
        <!-- フッター -->
    </footer>
    <!-- l-footer -->

    <script> 
        const firebaseConfig = {
            apiKey: "AIzaSyBP_enJuXumqo5SoXHxYi1uS7n3KaYwGo8",
            authDomain: "poimaruapp.firebaseapp.com",
            databaseURL: "https://poimaruapp-default-rtdb.firebaseio.com",
            projectId: "poimaruapp",
            storageBucket: "poimaruapp.appspot.com",
            messagingSenderId: "409133139197",
            appId: "1:409133139197:web:f8f5440bb44c6bf0ebaa94",
            measurementId: "G-PKJ70BRLFS"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        // Firestoreの参照を取得
        const db = firebase.firestore();

        // Firestoreからデータを取得してHTMLに表示する関数
        function fetchProjects() {
            const projectList = document.getElementById('projectList');

            // FirestoreからprojectManagementコレクションのデータを取得
            db.collection('projectManagement').get()
                .then((querySnapshot) => {
                    querySnapshot.forEach((doc) => {
                        const projectData = doc.data();
                        // 取得したデータをHTMLに追加
                        const li = document.createElement('li');
                        li.innerHTML = `
                            <div class="newList__info">
                                <p class="top__block__category">${projectData.category}</p>
                                <p class="top__block__conditions">${projectData.conditions1}</p>
                            </div>
                        `;
                        projectList.appendChild(li);
                    });
                })
                .catch((error) => {
                    console.error('Error fetching projects: ', error);
                });
        }

        // ページの読み込みが完了したらFirestoreからデータを取得してHTMLに表示
        window.onload = function () {
            fetchProjects();
        };
    </script>

</body>
</html>
